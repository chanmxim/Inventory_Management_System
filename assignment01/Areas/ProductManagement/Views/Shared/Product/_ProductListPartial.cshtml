@model List<assignment01.Areas.ProductManagement.Models.Product>
@using Microsoft.AspNetCore.Mvc.TagHelpers

@if (Model.Any())
{
<p class="text-success">@TempData["Message"]</p>
<div class="row">
    @foreach (var product in Model)
    {
    <div class="col-md-4 col-lg-3 mb-4">
        <div class="card">
            <img src="https://placehold.co/400x400" class="card-img-top" alt="Picture of a product">
            
            <div class="card-body">
                <h5 class="card-title">@product.ProductName</h5>
                <p class="card-text">@product.ProductDescription</p>
            </div>
            
            <ul class="list-group list-group-flush">
                <li class="list-group-item">
                    <strong>Category:</strong> @product.Category.CategoryName
                </li>
                <li class="list-group-item">
                    <strong>Price:</strong> @Html.DisplayFor(p => product.Price, "Price")
                </li>
                <li class="list-group-item">
                    <strong>Quantity:</strong> @product.Quantity
                </li>
                <li class="list-group-item">
                    <strong>Low Stock Threshold:</strong> @product.LowStockThreshold
                </li>
            </ul>
            <div class="card-body d-flex justify-content-between">
                <a asp-action="Details" asp-route-id="@product.ProductId" class="btn btn-info btn-sm">Details</a>
                
                @if (User.IsInRole("Admin"))
                {
                <a asp-action="Edit" asp-route-id="@product.ProductId" class="btn btn-secondary btn-sm">Edit</a>
                }
                
                <a asp-area="OrderManagement" asp-controller="CartItem" asp-action="AddItemToCart"
                   asp-route-ProductId="@product.ProductId"
                   class="btn btn-primary btn-sm"><i class="fa-solid fa-cart-shopping"></i> Add to Cart</a>
            </div>
        </div>
    </div>
    }
</div>
}
else
{
<p>No product available</p>
}
